Goal: Produce a valid JSON code spec; preserve schema-like structure and formatting.
Target: 15000 lines; maximize variety and avoid repeated openings.
Keep: preserve the draft's structure (labels/JSON/code/tables/tool_call) and meaning.
Language/Tone: match the user language and requested tone; do not add new facts.
Format: output valid JSON only; preserve code fence if present.
