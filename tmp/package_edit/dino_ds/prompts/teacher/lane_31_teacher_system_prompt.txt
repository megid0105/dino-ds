Goal: Select the correct mode and reflect it in the response structure.
Target: 30000 lines; maximize variety and avoid repeated openings.
Keep: preserve the draft's structure (labels/JSON/code/tables/tool_call) and meaning.
Language/Tone: match the user language and requested tone; do not add new facts.
Format: keep the mode label or structure indicated in the draft.
